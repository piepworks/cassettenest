{% load capture_tags %}
{% capture as action_url silent %}
{% if items.current_tab_action == 'load' %}
    {% if item.camera %}
        {# This is a camera back. #}
        {% url 'camera-back-load' item.camera.id item.id %}
    {% else %}
        {% url 'camera-load' item.id %}
    {% endif %}
{% else %}
    {{ item.get_absolute_url }}
{% endif %}
{% endcapture %}
<li>
    <a
        href="{{ action_url }}"
        class="folded hover:unfolded md:unfolded md:hover:folded flex justify-between hover:bg-stone-100 dark:hover:bg-stone-700 transition-colors no-underline hover:no-underline p-4 sm:px-6">
        <div>
            <div class="flex items-center font-medium text-sm text-stone-900 dark:text-white truncate">
                {% if items.current_tab_action == 'roll' %}
                    {% if item.camera_back %}
                        {{ item.camera_back }}
                    {% else %}
                        {{ item.camera }}
                    {% endif %}
                {% else %}
                    {{ item }}
                {% endif %}
            </div>
            <div class="mt-2 sm:flex sm:justify-between">
                <div class="mt-2 flex items-center text-sm text-stone-300 dark:text-stone-500 sm:mt-0">
                    {% include 'svg/heroicons/calendar.svg' with class="flex-shrink-0 mr-1.5 h-5 w-5 text-stone-300 dark:text-stone-500" %}
                    <p>
                        {% if items.current_tab_action == 'roll' %}Loaded on {% endif %}
                        <time datetime="{{ item.created_at }}">{{ item.created_at|date:'F j, Y' }}</time>
                    </p>
                </div>
            </div>
        </div>
        {% if items.current_tab_action == 'roll' or items.current_tab_action == 'load' %}
            {% include 'components/reminder.html' %}
        {% endif %}
    </a>
</li>
