{% extends 'base_site.html' %}

{% block content %}

<h2>Add film</h2>

<form action="{% url 'index' %}" method="post">
    {% csrf_token %}
    <select name="film">
        <option value="">Select a film</option>
        {% regroup films by manufacturer as films_list %}
        {% for manufacturer in films_list %}
        <optgroup label="{{ manufacturer.grouper }}">
            {% for film in manufacturer.list %}
                <option value="{{ film.id }}">{{ film.name }} in {{ film.get_format_display }}</option>
            {% endfor %}
        </optgroup>
        {% endfor %}
    </select>
    <input type="number" name="quantity" placeholder="quantity" />
    <input type="submit" value="Add">
</form>

<h2><a href="{% url 'add-camera' user.username %}">Add a camera</a></h2>

<h2>Currently loaded cameras</h2>

{% if loaded_camera_list %}
<ul>
{% for camera in loaded_camera_list %}
    <li><a href="{% url 'camera' camera.owner camera.id %}">{{ camera.name }}</a></li>
{% endfor %}
</ul>
{% else %}
<p>You have no loaded cameras.</p>
{% endif %}

<h2>Cameras ready to load</h2>

{% if empty_camera_list %}
<ul>
{% for camera in empty_camera_list %}
    <li><a href="{% url 'load-camera' camera.owner camera.id %}">{{ camera.name }}</a></li>
{% endfor %}
</ul>
{% else %}
<p>You have no cameras ready to load.</p>
{% endif %}

<hr />

{% if latest_finished_rolls %}
<h2>Recently finished rolls</h2>
<ul>
{% for roll in latest_finished_rolls %}
    <li>
        <a href="{% url 'profile-roll' roll.owner.username roll.film.slug roll.id %}">{{ roll.film }}</a>
    </li>
{% endfor %}
</ul>
{% endif %}

{% if latest_roll_list %}
<h2>Recently added rolls</h2>
<ul>
{% for roll in latest_roll_list %}
    <li>
        <a href="{% url 'profile-roll' roll.owner.username roll.film.slug roll.id %}">{{ roll.film }}</a>
    </li>
{% endfor %}
</ul>
{% else %}
<p>You have no film.</p>
{% endif %}

{% endblock %}
