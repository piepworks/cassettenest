{% extends 'base_site.html' %}

{% block content %}

{% for project in projects %}
    {% include 'inventory/_card.html' with name=project.name location=project.get_absolute_url slot="count" count=project.get_rolls_remaining %}
{% endfor %}

{% for roll in rolls_loaded %}
    {% include 'inventory/_card.html' with name=roll.camera.name location=roll.camera.get_absolute_url slot="reminder" roll=roll %}
{% endfor %}

<ul>
    <li>Ready to Load
        <ul>
        {% if cameras_empty %}
            {% for camera in cameras_empty %}
            <li><a href="{% url 'camera-load' camera.id %}">{{ camera.name }}</a></li>
            {% endfor %}
        {% else %}
            <li>You have no cameras ready to load.</li>
        {% endif %}
        </ul>
    </li>
    <li>Inventory
        <ul>
            <li><a href="{% url 'ready' %}">{{ rolls_ready_count }} roll{{ rolls_ready_count|pluralize }} ready to process.</a></li>
            <li><a href="{% url 'dashboard' %}">{{ rolls_outstanding_count }} roll{{ rolls_outstanding_count|pluralize }} are still <span class="help" title="Everything that's not in storage or archived">outstanding</span>.</a></li>
            <li><a href="{% url 'profile' %}">{{ rolls_storage_count }} roll{{ rolls_storage_count|pluralize }} in storage</a></li>
        </ul>
    </li>
</ul>

<hr />

<h2>Add film</h2>

<form action="{% url 'rolls-add' %}" method="post">
    {% csrf_token %}
    <select name="film" required>
        <option value="">Select a film</option>
        {% regroup films by manufacturer as films_list %}
        {% for manufacturer in films_list %}
        <optgroup label="{{ manufacturer.grouper }}">
            {% for film in manufacturer.list %}
                <option value="{{ film.id }}">{{ film.name }} in {{ film.get_format_display }}</option>
            {% endfor %}
        </optgroup>
        {% endfor %}
    </select>
    <input type="number" min="1" name="quantity" placeholder="quantity" required />
    <input type="submit" value="Add" />
</form>

<h2><a href="{% url 'camera-add' %}">Add a camera</a></h2>
<h2><a href="{% url 'project-add' %}">Add a project</a></h2>
{% endblock %}
