{% if not project %}
    {% if filters.format != 'all' or filters.type != 'all' %}
        <a hx-get="{% url 'inventory' %}" hx-indicator="#spinner" hx-target="#inventory-content-wrapper" href="{% url 'inventory' %}">Reset filter</a>
    {% endif %}
    <hr />
{% endif %}

<h3 id="film-summary">
    {% if not project %}
        {% if filters.format != 'all' or filters.type != 'all' %}
            {{ total_film_count.count }}
            roll{{ total_film_count.count|pluralize }} (filtered),
            <small><a hx-get="{% url 'inventory' %}" hx-indicator="#spinner" hx-target="#inventory-content-wrapper" href="{% url 'inventory' %}">
        {% endif %}
    {% endif %}
    {{ total_rolls }} roll{{ total_rolls|pluralize }}
    {% if project %}
        remaining
    {% else %}
        {% if filters.format != 'all' or filters.type != 'all' %}
            total</a></small>
        {% endif %}
    {% endif %}
</h3>

<section id="film-wrapper" class="logbook">
    {% if film_counts %}
        <table>
            <thead>
                <tr>
                    <th class="text-left">Manufacturer</th>
                    <th class="text-left">Film Stock</th>
                    <th class="text-left">Type</th>
                    <th class="text-left">Format</th>
                    <th class="text-left">Count</th>
                </tr>
            </thead>
            <tbody>
            {% for film in film_counts %}
                <tr>
                    {% include 'components/film.html' %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No rolls matching the current filter.</p>
    {% endif %}
</section>

{% if request.htmx %}
<script>
    // Reset the document <title> with the current info.
    titlePrefix = 'Inventory';
    newSubtitle = ''
    formatName = '{{ filters.format_name }}';
    typeName = '{{ filters.type_name }}';

    document.title = document.title.replace(/^[^/]+/, `${titlePrefix} `);

    if (formatName !== 'all') {
        if (typeName !== 'all') {
            newSubtitle = `${formatName}, ${typeName}`;
        } else {
            newSubtitle = formatName;
        }
    } else {
        if (typeName !== 'all') {
            newSubtitle = typeName;
        }
    }

    if (newSubtitle !== '') {
        document.title = document.title.replace(`${titlePrefix} `, `${titlePrefix} (${newSubtitle}) `);
    }
</script>
{% endif %}
