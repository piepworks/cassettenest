<form action="{% url 'project-rolls-add' project.id %}" method="post">
    {% csrf_token %}
    {% regroup film_available_count by get_type_display as film_list %}

    <div class="field">
        <fieldset>
            <legend>Add rolls to this project</legend>
            <div class="flex flex-wrap gap-3">
                <select id="id_film" name="film" required>
                    <option value="">Select a film</option>
                    {% for type in film_list %}
                    <optgroup label="{{ type.grouper }}">
                        {% for film in type.list %}
                        <option value="{{ film.id }}">{{ film }} ({{ film.count }})</option>
                        {% endfor %}
                    </optgroup>
                    {% endfor %}
                </select>
                {% include 'components/form-stepper-field.html' with field=stepper_form.quantity %}
            </div>
        </fieldset>
    </div>
    <div class="action"><button>Add to project</button></div>
</form>
