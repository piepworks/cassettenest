<form action="{% url 'project-rolls-add' project.id %}" method="post">
    {% csrf_token %}
    {% regroup film_available_count by get_type_display as film_list %}

    <div class="c-field">
        <fieldset>
            <legend>Add rolls to this project</legend>
            <select id="id_film" name="film" required>
                <option value="">Select a film</option>
                {% for type in film_list %}
                <optgroup label="{{ type.grouper }}">
                    {% for film in type.list %}
                    <option value="{{ film.id }}">{{ film }} ({{ film.count }})</option>
                    {% endfor %}
                </optgroup>
                {% endfor %}
            </select>
            <input type="number" min="1" name="quantity" value="0" required />
        </fieldset>
    </div>
    <div class="action"><input type="submit" value="Add to project" /></div>
</form>
