{% extends 'base_site.html' %}

{% block title %} / {{ owner.username }}{% endblock %}

{% block content %}
<h1>{{ owner.username }}</h1>

<h2>Projects</h2>
<p><a href="{% url 'project-add' %}">Add a project</a></p>

<ul>
    {% regroup projects by get_status_display as status_list %}
    {% for status in status_list %}
    <ul>
        <li>{{ status.grouper }}
            <ul>
                {% for project in status.list %}
                <li><a href="{% url 'project-detail' project.id %}">{{ project.name }}</a></li>
                {% endfor %}
            </ul>
        </li>
    </ul>
    {% endfor %}
</ul>

<hr />

{% if owner.roll_set.all|length > 0 %}
<ul class="cards">
    {% for film in film_counts %}
    <li>
        <a class="card card__{{ film.type }}" href="{% url 'film-rolls' film.slug %}">
            <header><h1>{{ film }}</h1> </header>
            <div class="count"><span>{{ film.count }}</span></div>
        </a>
    </li>
    {% endfor %}
</ul>

<h2>Formats</h2>
<ul>
    {% for format in format_counts %}
    <li><a href="{% url 'film-format' format.format %}">{{ format.format_display }} / {{ format.count }}</a></li>
    {% endfor %}
</ul>

<h2>Types</h2>
<ul>
    {% for type in type_counts %}
    <li><a href="{% url 'film-type' type.type %}">{{ type.type_display }} / {{ type.count }}</a></li>
    {% endfor %}
</ul>
{% else %}
<p>No films found.</p>
{% endif %}
{% endblock %}
