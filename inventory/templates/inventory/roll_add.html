{% extends 'base_site.html' %}

{% block title %}Add a roll to your logbook{% endblock %}

{% block content %}
<div class="raw">
    <h1>Add a roll to your&nbsp;logbook</h1>
    <p>Or <a href="{% url 'rolls-add' %}">add rolls to storage</a>.</p>
    <p>For best results with the auto-generated code/label, be sure to add things in strict chronological order from oldest to newest.</p>
    <p><i>To mark a roll as "Loaded," go to <a href="{% url 'index' %}">the home page</a> and choose a "Ready to Load" camera.</i></p>

    <form action="{% url 'roll-add' %}" method="post">
        {% csrf_token %}
        <div class="c-field">
            <label for="id_film">Film</label>
            {% include 'inventory/_film-selector.html' %}
        </div>

        <div class="c-field">
            <p>
                Not seeing the film you need?
                <a href="{% url 'stock-add' %}?destination=add-logbook">Add a new kind of film to the list.</a>
            </p>
        </div>

        {% include 'inventory/_form-roll.html' %}
        <div class="action">
            <p><input type="submit" name="" value="Save roll to logbook" /></p>
            <p><input type="submit" class="secondary" name="another" value="Save roll to logbook and add another" /></p>
        </div>
    </form>
</div>
{% endblock %}

{% block page_js %}
<script>
    // Automatically select a film if possible.
    // ?film=[film id]
    (new URL(window.location)).searchParams.forEach((x, y) => {
        document.getElementById(`id_${y}`).value = x;
    });
</script>
{% endblock %}
