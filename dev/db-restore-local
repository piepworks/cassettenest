#!/bin/sh

# Restore the local database after verifying the production database backup.

# Set variables
temp_folder="${HOME}/Code/cassettenest/backups"
now=$(date +"%F")
latest_backup="cassettenest_${now}"

# Reload local database.
docker-compose exec -T db pg_restore -U cassette_nest -d cassette_nest --clean < ${temp_folder}/local.dump

# Delete the production backup we verified from the local machine.
rm ${temp_folder}/${latest_backup}.dump
